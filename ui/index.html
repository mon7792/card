<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NewGame</title>
    <link rel="stylesheet" href="css/index.css">
</head>

<body>
<h2>TIN GAME</h2>
<button id="new-button-id">NEW GAME</button>
<div id="game-table">
    <h4>PLAYER-1</h4>
    <div class="card">
        <div class="card-item" id="1">
            <!-- CARD VALUE -->
            <div class="card-item-value">
                <div class="card-item-value-number"></div>
                <div class="card-item-value-suit">
                </div>
            </div>
            <!-- CARD VALUE END -->
        </div>
        <div class="card-item" id="2">
            <!-- CARD VALUE -->
            <div class="card-item-value">
                <div class="card-item-value-number"></div>
                <div class="card-item-value-suit">
                </div>
            </div>
            <!-- CARD VALUE END -->
        </div>
        <div class="card-item" id="3">
            <!-- CARD VALUE -->
            <div class="card-item-value">
                <div class="card-item-value-number"></div>
                <div class="card-item-value-suit">
                </div>
            </div>
            <!-- CARD VALUE END -->
        </div>
    </div>
    <h4>PLAYER-2</h4>
    <div class="card">
        <div class="card-item" id="4">
            <!-- CARD VALUE -->
            <div class="card-item-value">
                <div class="card-item-value-number"></div>
                <div class="card-item-value-suit">
                </div>
            </div>
            <!-- CARD VALUE END -->
        </div>
        <div class="card-item" id="5">
            <!-- CARD VALUE -->
            <div class="card-item-value">
                <div class="card-item-value-number"></div>
                <div class="card-item-value-suit">
                </div>
            </div>
            <!-- CARD VALUE END -->
        </div>
        <div class="card-item" id="6">
            <!-- CARD VALUE -->
            <div class="card-item-value">
                <div class="card-item-value-number"></div>
                <div class="card-item-value-suit">
                </div>
            </div>
            <!-- CARD VALUE END -->
        </div>
    </div>
</div>

<script src="js/card.js" type="application/javascript"></script>
<script type="application/javascript">
    // variable
    let player1Cards = [];
    let player2Cards = [];

    let newButtonID = document.getElementById("new-button-id");
    let cardItems = document.getElementsByClassName("card-item");

    // button click event handler.
    newButtonID.addEventListener("click", function () {
        console.log("game started");
    //    1. distribute the card
        distributeCards(CardDeck);
    //    2. display the board
        displayCardsToPlayer(player1Cards, player2Cards);
    //    3. evaluate the winner
        let result = EvaluteTheWinner(player1Cards, player2Cards);
    //    4. display the winner
        console.log(result);
    });

    // distributeCards between two players.
    function distributeCards(cardDeck) {
        player1Cards.push(CardDeck[0],CardDeck[2],CardDeck[4]);
        player2Cards.push(CardDeck[1],CardDeck[3],CardDeck[5]);
    }

    // displayCardsToPlayer appends the card to game board.
    function displayCardsToPlayer(player1Cards, player2Cards) {
        let i;
        for (i = 0; i < cardItems.length; i++){
            let cardItem = cardItems[i];
            let cardDetails = getPlayerCards(player1Cards, player2Cards, i);

            // update card in the game board.
            cardItem.querySelector(".card-item-value-number").innerHTML = cardDetails.cardValue;
            cardItem.querySelector(".card-item-value-suit").innerHTML = cardDetails.cardSuit;
            
            // update the color.
            cardItem.style.backgroundColor = SuitColor.get(cardDetails.cardSuit);
        }
    }

    // getPlayerCards returns card assigned to particular player
    function getPlayerCards(playCard1, playCard2, noOfCards){
        let currentPlayCard;
        let cardValue; 
        let cardSuit;
        if (noOfCards < 3){
            currentPlayCard = playCard1;
        } else {
            currentPlayCard = playCard2;
        }
        cardValue = currentPlayCard[noOfCards%3].Value;
        cardSuit =  currentPlayCard[noOfCards%3].Suit;
        return { cardValue, cardSuit};
    }



</script>

</body>
</html>